<!DOCTYPE html>
<html lang="ro">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CryptoFlip Dashboard | Bullish & Bearish Signals</title>
    <meta name="description"
        content="Dashboard real-time care detecteazƒÉ flip-uri bullish »ôi bearish pe multiple timeframe-uri pentru principalele crypto assets." />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;600&display=swap"
        rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
</head>

<body>

    <!-- Header -->
    <header class="header">
        <div class="header-inner">
            <div class="logo">
                <div class="logo-icon">
                    <svg width="28" height="28" viewBox="0 0 28 28" fill="none">
                        <path d="M14 2L26 8V20L14 26L2 20V8L14 2Z" fill="url(#logoGrad)" stroke="rgba(255,255,255,0.2)"
                            stroke-width="1" />
                        <path d="M14 7L20 10.5V17.5L14 21L8 17.5V10.5L14 7Z" fill="rgba(255,255,255,0.15)" />
                        <path d="M10 13L13 16L18 11" stroke="white" stroke-width="1.5" stroke-linecap="round"
                            stroke-linejoin="round" />
                        <defs>
                            <linearGradient id="logoGrad" x1="2" y1="2" x2="26" y2="26">
                                <stop offset="0%" stop-color="#6366f1" />
                                <stop offset="100%" stop-color="#8b5cf6" />
                            </linearGradient>
                        </defs>
                    </svg>
                </div>
                <span class="logo-text">CryptoFlip</span>
            </div>
            <div class="header-controls">
                <div class="last-update" id="lastUpdate">
                    <div class="pulse-dot"></div>
                    <span>Se actualizeazƒÉ...</span>
                </div>
                <button class="notif-btn" id="notifBtn" onclick="toggleNotifications()">
                    <span id="notifIcon">üîî</span>
                    <span id="notifLabel">NotificƒÉri</span>
                </button>
                <button class="refresh-btn" id="refreshBtn" onclick="refreshData()">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M13.65 2.35A8 8 0 1 0 15 8h-2a6 6 0 1 1-1.05-3.35L9 7h5V2l-0.35 0.35Z"
                            fill="currentColor" />
                    </svg>
                    Refresh
                </button>
            </div>
        </div>
    </header>

    <!-- Page Navigation -->
    <nav class="page-nav">
        <a href="index.html" class="page-nav-link active">
            üîµ Top Crypto
        </a>
        <a href="memecoins.html" class="page-nav-link">
            ‚ö° Solana Memecoins
        </a>
    </nav>

    <!-- Notification Banner -->

    <div class="notif-banner hidden" id="notifBanner">
        <div class="notif-banner-inner">
            <span class="notif-banner-icon">üîî</span>
            <div>
                <strong>ActiveazƒÉ alertele de flip!</strong>
                <span>Prime»ôti notificƒÉri instant c√¢nd un asset face un flip confirmat (EMA + RSI).</span>
            </div>
            <button class="notif-banner-btn" onclick="requestNotifPermission()">ActiveazƒÉ</button>
            <button class="notif-banner-dismiss" onclick="dismissBanner()">‚úï</button>
        </div>
    </div>

    <!-- Stats Bar -->
    <div class="stats-bar">
        <div class="stats-bar-inner">
            <div class="stat-item">
                <span class="stat-value bullish-text" id="bullishCount">‚Äì</span>
                <span class="stat-label">‚úÖ Confirmat Bullish</span>
            </div>
            <div class="stat-divider"></div>
            <div class="stat-item">
                <span class="stat-value bearish-text" id="bearishCount">‚Äì</span>
                <span class="stat-label">‚úÖ Confirmat Bearish</span>
            </div>
            <div class="stat-divider"></div>
            <div class="stat-item">
                <span class="stat-value" style="color:#f59e0b" id="weakCount">‚Äì</span>
                <span class="stat-label">‚ö†Ô∏è Semnal Slab</span>
            </div>
            <div class="stat-divider"></div>
            <div class="stat-item">
                <span class="stat-value neutral-text" id="neutralCount">‚Äì</span>
                <span class="stat-label">Neutru</span>
            </div>
            <div class="stat-divider"></div>
            <div class="stat-item">
                <span class="stat-value" id="totalAssets">‚Äì</span>
                <span class="stat-label">Assets</span>
            </div>
        </div>
    </div>

    <!-- Controls Section -->
    <div class="controls-section">
        <div class="controls-inner">
            <div class="search-group">
                <input type="text" class="search-input" id="searchInput" placeholder="Search..."
                    oninput="filterSearch(this.value)" />
            </div>
            <div class="filter-group">
                <span class="filter-label">Timeframe:</span>
                <div class="tf-buttons" id="tfButtons">
                    <button class="tf-btn active" data-tf="1h" onclick="filterTimeframe('1h')">1H</button>
                    <button class="tf-btn" data-tf="4h" onclick="filterTimeframe('4h')">4H</button>
                    <button class="tf-btn" data-tf="1d" onclick="filterTimeframe('1d')">1D</button>
                    <button class="tf-btn" data-tf="1w" onclick="filterTimeframe('1w')">1W</button>
                </div>
            </div>
            <div class="filter-group">
                <span class="filter-label">Semnal:</span>
                <div class="signal-buttons">
                    <button class="signal-btn active" data-signal="all" onclick="filterSignal('all')">Toate</button>
                    <button class="signal-btn bullish-filter" data-signal="confirmed-bullish"
                        onclick="filterSignal('confirmed-bullish')">‚úÖ Bullish</button>
                    <button class="signal-btn bearish-filter" data-signal="confirmed-bearish"
                        onclick="filterSignal('confirmed-bearish')">‚õî Bearish</button>
                    <button class="signal-btn weak-filter" data-signal="weak" onclick="filterSignal('weak')">‚ö†Ô∏è
                        Slab</button>
                </div>
            </div>
            <!-- Add Asset Button -->
            <button class="add-asset-btn" id="addAssetToggleBtn" onclick="toggleAddPanel()" style="margin-left: auto;">
                <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
                    <path d="M7 1v12M1 7h12" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                </svg>
                Asset
            </button>
        </div>
    </div>

    <!-- Add Asset Panel -->
    <div class="add-panel hidden" id="addPanel">
        <div class="add-panel-inner">
            <div class="add-panel-content">
                <div class="add-panel-title">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M8 1v14M1 8h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                    </svg>
                    AdaugƒÉ Asset Nou
                </div>
                <div class="add-panel-form">
                    <div class="add-input-wrap">
                        <input type="text" id="addSymbolInput" placeholder="Ex: AAVEUSDT sau AAVE..."
                            oninput="onAddInput(this.value)" onkeydown="onAddKeydown(event)" autocomplete="off"
                            spellcheck="false" />
                        <div class="add-suggestions" id="addSuggestions"></div>
                    </div>
                    <button class="add-confirm-btn" id="addConfirmBtn" onclick="confirmAddAsset()">
                        <span id="addConfirmLabel">AdaugƒÉ</span>
                    </button>
                </div>
                <div class="add-status" id="addStatus"></div>
                <div class="add-hint">Introduce simbolul Binance (ex: BTCUSDT, ETHUSDT, AAVEUSDT)</div>
            </div>
            <button class="add-panel-close" onclick="toggleAddPanel()">‚úï</button>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main-content">
        <div class="loading-state" id="loadingState">
            <div class="loading-spinner"></div>
            <p>Se √ÆncarcƒÉ datele de pia»õƒÉ...</p>
            <span class="loading-sub">Conectare la Binance API</span>
        </div>
        <div class="error-state hidden" id="errorState">
            <div class="error-icon">‚ö†Ô∏è</div>
            <h3>Eroare la √ÆncƒÉrcarea datelor</h3>
            <p id="errorMessage">Nu s-a putut conecta la API.</p>
            <button class="refresh-btn" onclick="refreshData()">√éncearcƒÉ din nou</button>
        </div>
        <div class="dashboard-grid hidden" id="dashboardGrid"></div>
    </main>

    <!-- Info Panel -->
    <div class="info-panel">
        <div class="info-inner">
            <div class="info-item">
                <div class="indicator-box bullish-bg">EMA9 &gt; EMA21 + RSI &gt; 50</div>
                <span>= ‚úÖ Confirmat Bullish</span>
            </div>
            <div class="info-item">
                <div class="indicator-box bearish-bg">EMA9 &lt; EMA21 + RSI &lt; 50</div>
                <span>= ‚õî Confirmat Bearish</span>
            </div>
            <div class="info-item">
                <div class="indicator-box"
                    style="background:rgba(245,158,11,0.12);color:#f59e0b;border:1px solid rgba(245,158,11,0.3);">EMA ‚â†
                    RSI</div>
                <span>= ‚ö†Ô∏è Semnal Slab</span>
            </div>
            <div class="info-item info-note">
                <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
                    <circle cx="7" cy="7" r="6" stroke="rgba(255,255,255,0.4)" stroke-width="1.2" />
                    <path d="M7 6v4M7 4.5v.5" stroke="rgba(255,255,255,0.6)" stroke-width="1.2"
                        stroke-linecap="round" />
                </svg>
                <span>Binance API ¬∑ EMA 9/21 + RSI 14 ¬∑ Click card = Chart TradingView</span>
            </div>
        </div>
    </div>

    <!-- ===== TradingView Chart Modal ===== -->
    <div class="tv-overlay hidden" id="tvOverlay" onclick="closeTVOnBg(event)">
        <div class="tv-modal" id="tvModal">
            <div class="tv-header">
                <div class="tv-asset-info">
                    <span class="tv-asset-icon" id="tvIcon">‚Çø</span>
                    <div class="tv-asset-text">
                        <span class="tv-asset-name" id="tvName">Bitcoin</span>
                        <span class="tv-asset-sym" id="tvSym">BTCUSDT</span>
                    </div>
                    <span class="tv-asset-price" id="tvPrice">‚Äì</span>
                    <span class="tv-asset-badge" id="tvBadge"></span>
                </div>
                <div class="tv-controls">
                    <div class="tv-itf-btns">
                        <button class="tv-itf active" data-iv="60" onclick="changeTVInterval('60', this)">1H</button>
                        <button class="tv-itf" data-iv="240" onclick="changeTVInterval('240', this)">4H</button>
                        <button class="tv-itf" data-iv="D" onclick="changeTVInterval('D', this)">1D</button>
                        <button class="tv-itf" data-iv="W" onclick="changeTVInterval('W', this)">1W</button>
                    </div>
                    <button class="tv-signals-btn" id="tvSignalsBtn" onclick="openSignalFromTV()">üìä EMA / RSI</button>
                    <a class="tv-external-btn" id="tvExternalLink" href="#" target="_blank" rel="noopener"
                        title="Deschide pe TradingView.com">
                        ‚Üó TradingView
                    </a>
                    <button class="tv-close-btn" onclick="closeTVChart()">‚úï</button>
                </div>
            </div>
            <div class="tv-chart-wrap" id="tvChartWrap">
                <!-- TradingView widget injected here by JS -->
            </div>
        </div>
    </div>

    <!-- ===== EMA/RSI Signal Modal ===== -->
    <div class="modal-overlay hidden" id="modalOverlay" onclick="closeModal(event)">
        <div class="modal" id="assetModal">
            <button class="modal-close" onclick="closeModalDirect()">‚úï</button>
            <div class="modal-header">
                <span class="modal-asset-icon" id="modalIcon">‚Çø</span>
                <div>
                    <h2 class="modal-title" id="modalTitle">Bitcoin</h2>
                    <span class="modal-subtitle" id="modalSymbol">BTCUSDT</span>
                </div>
                <div class="modal-price" id="modalPrice">$0.00</div>
            </div>
            <div class="modal-timeframes" id="modalTimeframes"></div>
            <div class="modal-legend">
                <div class="legend-row">
                    <span class="legend-dot bullish-bg"></span><span>‚úÖ Confirmat Bullish ‚Äî EMA9 &gt; EMA21
                        <strong>»ôi</strong> RSI &gt; 50</span>
                </div>
                <div class="legend-row">
                    <span class="legend-dot bearish-bg"></span><span>‚õî Confirmat Bearish ‚Äî EMA9 &lt; EMA21
                        <strong>»ôi</strong> RSI &lt; 50</span>
                </div>
                <div class="legend-row">
                    <span class="legend-dot" style="background:#f59e0b"></span><span>‚ö†Ô∏è Semnal Slab ‚Äî EMA »ôi RSI nu sunt
                        de acord</span>
                </div>
                <div class="legend-row">
                    <span class="legend-dot neutral-bg"></span><span>Neutru ‚Äî Date insuficiente</span>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>